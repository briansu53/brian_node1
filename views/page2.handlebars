
<div class="container">
    <button class="btn btn-primary"
            onclick="location.href='/data/add';">新增資料</button>
</div>

<table class="table table-striped">
    <thead>
    <tr>
        <th scope="col">編輯</th>
        <th scope="col">sid</th>
        <th scope="col">員工編號</th>
        <th scope="col">姓名</th>
        <th scope="col">生日</th>
        <th scope="col">建檔日期</th>
        <th scope="col">刪除</th>
    </tr>
    </thead>
    <tbody>
    {{#each sales}}
        <tr>
            <td><a href="/data/edit/{{this.sid}}"><i class="fas fa-edit"></i></a></td>
            <td>{{this.sid}}</td>
            <td>{{this.sales_id}}</td>
            <td>{{this.name}}</td>
            <td>{{this.birthday}}</td>
            <td>{{this.create_at}}</td>
            <td><a href="javascript:do_del({{this.sid}})"><i class="fas fa-trash-alt"></i></a></td>
        </tr>
    {{/each}}
    </tbody>
</table>
<script>
    function do_del(sid){
        if(confirm('是否要移除編號為 ' + sid + ' 的項目?')){
            $.get('/data/delete/'+sid, function(data){
                if(data.affectedRows===1){
                    alert('移除成功');
                    location.href = '/data';
                } else {
                    alert('移除失敗');
                }
            }, 'json');
        }
    }
</script>